<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Basic address book and slots assignments algorithm."><title>smoldot::network::basic_peering_strategy - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-9bb858ba049f1f21.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="smoldot" data-themes="" data-resource-suffix="" data-rustdoc-version="1.72.1 (d5c2e9c34 2023-09-13)" data-channel="1.72.1" data-search-js="search-f6292fe389d70017.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ><script src="../../../static.files/storage-59fd9b8ccb335783.js"></script><script defer src="../../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../smoldot/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../smoldot/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module basic_peering_strategy</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">smoldot</a>::<wbr><a href="../index.html">network</a>::<wbr><a class="mod" href="#">basic_peering_strategy</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/smoldot/network/basic_peering_strategy.rs.html#18-1062">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Basic address book and slots assignments algorithm.</p>
<p>The <a href="struct.BasicPeeringStrategy.html" title="struct smoldot::network::basic_peering_strategy::BasicPeeringStrategy"><code>BasicPeeringStrategy</code></a> contains a collection of network identities, identified by
a <a href="../../libp2p/peer_id/struct.PeerId.html" title="struct smoldot::libp2p::peer_id::PeerId"><code>PeerId</code></a>. Each network identity is associated to one or more chains, identified by a
<code>TChainId</code>.</p>
<p>Each network-identity-chain association can be in one of these three states:</p>
<ul>
<li>Normal.</li>
<li>Banned until a certain instant represented by <code>TInstant</code>.</li>
<li>Has a slot.</li>
</ul>
<p>“Normal” and “banned” network-identity-chain associations represent the potential peers to
connect to, while “slot” represent pending or established gossip slots.</p>
<p>Use <a href="struct.BasicPeeringStrategy.html#method.pick_assignable_peer" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::pick_assignable_peer"><code>BasicPeeringStrategy::pick_assignable_peer</code></a> in order to assign a slot to a
randomly-chosen network-identity that doesn’t currently have one.</p>
<p>If a gossip slot fails to be established with a certain peer, or if the peer misbehaves,
use <a href="struct.BasicPeeringStrategy.html#method.unassign_slot_and_ban" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slot_and_ban"><code>BasicPeeringStrategy::unassign_slot_and_ban</code></a> to ban the peer, preventing it from
obtaining a slot for a certain amount of time.</p>
<p>Each network identity that is associated with at least one chain is associated with zero or
more addresses. It is not possible to insert addresses to peers that aren’t associated to at
least one chain. Each address is either “connected” or “disconnected”.</p>
<p>There exists a limit to the number of peers per chain and the number of addresses per peer,
guaranteeing that the data structure only uses a bounded amount of memory. If these limits
are reached, peers and addresses are removed randomly. Peers that have a slot and addresses
in the “connected” state are never removed.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.PeerId"><code>pub use crate::libp2p::<a class="struct" href="../../libp2p/peer_id/struct.PeerId.html" title="struct smoldot::libp2p::peer_id::PeerId">PeerId</a>;</code></div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.BasicPeeringStrategy.html" title="struct smoldot::network::basic_peering_strategy::BasicPeeringStrategy">BasicPeeringStrategy</a></div></li><li><div class="item-name"><a class="struct" href="struct.Config.html" title="struct smoldot::network::basic_peering_strategy::Config">Config</a></div><div class="desc docblock-short">Configuration passed to <a href="struct.BasicPeeringStrategy.html#method.new" title="associated function smoldot::network::basic_peering_strategy::BasicPeeringStrategy::new"><code>BasicPeeringStrategy::new</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.UnassignSlotsAndBanIter.html" title="struct smoldot::network::basic_peering_strategy::UnassignSlotsAndBanIter">UnassignSlotsAndBanIter</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.unassign_slots_and_ban" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slots_and_ban"><code>BasicPeeringStrategy::unassign_slots_and_ban</code></a>.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.AssignablePeer.html" title="enum smoldot::network::basic_peering_strategy::AssignablePeer">AssignablePeer</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.pick_assignable_peer" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::pick_assignable_peer"><code>BasicPeeringStrategy::pick_assignable_peer</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.DisconnectAddrError.html" title="enum smoldot::network::basic_peering_strategy::DisconnectAddrError">DisconnectAddrError</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.disconnect_addr" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::disconnect_addr"><code>BasicPeeringStrategy::disconnect_addr</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.InsertAddressResult.html" title="enum smoldot::network::basic_peering_strategy::InsertAddressResult">InsertAddressResult</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.insert_address" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::insert_address"><code>BasicPeeringStrategy::insert_address</code></a> and
<a href="struct.BasicPeeringStrategy.html#method.insert_or_set_connected_address" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::insert_or_set_connected_address"><code>BasicPeeringStrategy::insert_or_set_connected_address</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.InsertChainPeerResult.html" title="enum smoldot::network::basic_peering_strategy::InsertChainPeerResult">InsertChainPeerResult</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.insert_chain_peer" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::insert_chain_peer"><code>BasicPeeringStrategy::insert_chain_peer</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.UnassignSlotAndBan.html" title="enum smoldot::network::basic_peering_strategy::UnassignSlotAndBan">UnassignSlotAndBan</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.unassign_slot_and_ban" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slot_and_ban"><code>BasicPeeringStrategy::unassign_slot_and_ban</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.UnassignSlotAndRemoveChainPeer.html" title="enum smoldot::network::basic_peering_strategy::UnassignSlotAndRemoveChainPeer">UnassignSlotAndRemoveChainPeer</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.unassign_slot_and_remove_chain_peer" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slot_and_remove_chain_peer"><code>BasicPeeringStrategy::unassign_slot_and_remove_chain_peer</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.UnassignSlotsAndBan.html" title="enum smoldot::network::basic_peering_strategy::UnassignSlotsAndBan">UnassignSlotsAndBan</a></div><div class="desc docblock-short">See <a href="struct.BasicPeeringStrategy.html#method.unassign_slots_and_ban" title="method smoldot::network::basic_peering_strategy::BasicPeeringStrategy::unassign_slots_and_ban"><code>BasicPeeringStrategy::unassign_slots_and_ban</code></a>.</div></li></ul></section></div></main></body></html>